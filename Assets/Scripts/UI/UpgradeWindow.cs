using System;
using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.UI;

public class UpgradeWindow : MonoBehaviour
{
    [SerializeField]
    private PlayerControl _mainHero;

    [SerializeField]
    private Text _speedLabel;
    [SerializeField]
    private Text _dashLabel;

    private float _speedDefault;
    private float _dashDefault;

    private void Start()
    {
        _speedDefault = _mainHero._hero.Speed;
        _dashDefault = _mainHero._hero.DashDistance;
        _mainHero.GetComponent<Destructable>().OnDeath += ResetUpgrades;

    }

    private void Update()
    {
        SetSpeedLabel();
        SetDashLabel();
    }

    private void SetSpeedLabel()
    {
        _speedLabel.text = _mainHero._hero.Speed.ToString();
    }

    private void SetDashLabel()
    {
        _dashLabel.text = _mainHero._hero.DashDistance.ToString();
    }

    public void UpgradeSpeed()
    {
        _mainHero._hero.Speed += 3f;
    }

    public void UpgradeDash()
    {
        _mainHero._hero.DashDistance += 10f;
    }

    private void ResetUpgrades()
    {
        print("Fuck");
        _mainHero._hero.Speed = _speedDefault;
        _mainHero._hero.DashDistance = _dashDefault;
    }
}
